{% extends "base.html" %}

{% block content %}
<h2>Synthetic Collateralized Debt Obligation</h2>
<h3>Introduction</h3>

<div id="markdown-content">
    {{ md_content|safe }}
</div>

<div class="loading-spinner" id="loadingSpinner" style="display: none;">
    <div class="spinner"></div>
</div>

<h3>Synthetic Collateralized Debt Obligation</h3>
<form id="cds-form" method="post" class="form-grid">
    <div id="tranches">
        <!-- Fixed Tranche fields (always 3) -->

        <h4>Tranche Senior</h4>
        <div class="form-group">
            <label for="tranche_upper_3">Upper Bound (%, i.e. 0.00):</label>
            <input type="number" step="0.01" id="tranche_upper_3" name="tranche_upper_3" value="{{ form_data.tranche_upper_3 }}" required>
        </div>
        <div class="form-group">
            <label for="tranche_lower_3">Lower Bound (%, i.e. 0.00):</label>
            <input type="number" step="0.01" id="tranche_lower_3" name="tranche_lower_3" value="{{ form_data.tranche_lower_3 }}" required>
        </div>
        <h4>Tranche Mezzanine</h4>
        <div class="form-group">
            <label for="tranche_upper_2">Upper Bound (%, i.e. 0.00):</label>
            <input type="number" step="0.01" id="tranche_upper_2" name="tranche_upper_2" value="{{ form_data.tranche_upper_2 }}" required>
        </div>
        <div class="form-group">
            <label for="tranche_lower_2">Lower Bound (%, i.e. 0.00):</label>
            <input type="number" step="0.01" id="tranche_lower_2" name="tranche_lower_2" value="{{ form_data.tranche_lower_2 }}" required>
        </div>
        <h4>Tranche Equity</h4>
        <div class="form-group">
            <label for="tranche_upper_1">Upper Bound (%, i.e. 0.00):</label>
            <input type="number" step="0.01" id="tranche_upper_1" name="tranche_upper_1" value="{{ form_data.tranche_upper_1 }}" required>
        </div>
        <div class="form-group">
            <label for="tranche_lower_1">Lower Bound (%, i.e. 0.00):</label>
            <input type="number" step="0.01" id="tranche_lower_1" name="tranche_lower_1" value="{{ form_data.tranche_lower_1 }}" required>
        </div>

    </div>
    <div id="cds-contracts">
        <!-- Initial CDS Contract fields -->
        {% for i in range(1, num_contracts + 1) %}
        <div class="cds-contract" data-index="{{ i }}">
            <h4>CDS Contract {{ i }}</h4>
            <div class="form-group">
                <label for="nominal_{{ i }}">Nominal ($):</label>
                <input type="number" step="0.01" id="nominal_{{ i }}" name="nominal_{{ i }}" value="{{ form_data['nominal_' ~ i] }}" required>
            </div>
            <div class="form-group">
                <label for="spread_{{ i }}">Spread (i.e., 0.05)::</label>
                <input type="number" step="0.0001" id="spread_{{ i }}" name="spread_{{ i }}" value="{{ form_data['spread_' ~ i] }}" required>
            </div>
            <div class="form-group">
                <label for="recovery_rate_{{ i }}">Recovery Rate (%, i.e. 0.50):</label>
                <input type="number" step="0.0001" id="recovery_rate_{{ i }}" name="recovery_rate_{{ i }}" value="{{ form_data['recovery_rate_' ~ i] }}" required>
            </div>
            <div class="form-group">
                <label for="risk_free_{{ i }}">Risk-Free Rate (%, i.e. .035):</label>
                <input type="number" step="0.0001" id="risk_free_{{ i }}" name="risk_free_{{ i }}" value="{{ form_data['risk_free_' ~ i] }}" required>
            </div>
            <div class="form-group">
                <label for="calendar_type_{{ i }}">Calendar Type:</label>
                <select id="calendar_type_{{ i }}" name="calendar_type_{{ i }}" required>
                    <option value="American" {% if form_data['calendar_type_' ~ i] == "American" %}selected{% endif %}>American</option>
                    <option value="TARGET" {% if form_data['calendar_type_' ~ i] == "TARGET" %}selected{% endif %}>TARGET</option>
                    <option value="UnitedKingdom" {% if form_data['calendar_type_' ~ i] == "UnitedKingdom" %}selected{% endif %}>United Kingdom</option>
                    <option value="China" {% if form_data['calendar_type_' ~ i] == "China" %}selected{% endif %}>China</option>
                </select>
            </div>
            <div class="form-group">
                <label for="side_type_{{ i }}">Side Type:</label>
                <select id="side_type_{{ i }}" name="side_type_{{ i }}" required>
                    <option value="Seller" {% if form_data['side_type_' ~ i] == "Seller" %}selected{% endif %}>Seller</option>
                    <option value="Buyer" {% if form_data['side_type_' ~ i] == "Buyer" %}selected{% endif %}>Buyer</option>
                </select>
            </div>
            <div class="form-group">
                <label for="selected_tenor_{{ i }}">Selected Tenor:</label>
                <select id="selected_tenor_{{ i }}" name="selected_tenor_{{ i }}" required>
                    <option value="Annual" {% if form_data['selected_tenor_' ~ i] == "Annual" %}selected{% endif %}>Annual</option>
                    <option value="Semiannual" {% if form_data['selected_tenor_' ~ i] == "Semiannual" %}selected{% endif %}>Semiannual</option>
                    <option value="Quarterly" {% if form_data['selected_tenor_' ~ i] == "Quarterly" %}selected{% endif %}>Quarterly</option>
                    <option value="Monthly" {% if form_data['selected_tenor_' ~ i] == "Monthly" %}selected{% endif %}>Monthly</option>
                </select>
            </div>
            <div class="form-group">
                <label for="entry_date_{{ i }}">Entry Date:</label>
                <input type="date" id="entry_date_{{ i }}" name="entry_date_{{ i }}" value="{{ form_data['entry_date_' ~ i] }}" required>
            </div>
            <div class="form-group">
                <label for="end_date_{{ i }}">End Date:</label>
                <input type="date" id="end_date_{{ i }}" name="end_date_{{ i }}" value="{{ form_data['end_date_' ~ i] }}" required>
            </div>
            <button type="button" class="remove-cds btn btn-danger" style="margin-top: 10px;">Remove this CDS Contract</button>
        </div>
        {% endfor %}
    </div>

    <button type="button" id="add-cds" class="btn btn-secondary" style="padding: 4px 10px; font-size: 15px; height: 30px; width: auto;">Add Another CDS Contract</button>
    <button type="submit" class="btn btn-primary">Calculate Synthetic CDO</button>
</form>

{% if cds_results is not none %}
<h3>Synthetic CDO Results</h3>
<table class="results-table">
    <thead>
        <tr>
            <th>Tranche Name</th>
            <th>Expected Loss</th>
            <th>Default Probability</th>
            <th>Net Preset Value</th>
            <th>Premium</th>
        </tr>
    </thead>
    <tbody>
        {% for tranche_name, values in cds_results['tranche_cashflows'].items() %}
        <tr>
            <td>{{ tranche_name }}</td>
            <td>{{ values['expected_loss'] }}</td>
            <td>{{ values['default_probability'] }}</td>
            <td>{{ cds_results['tranche_npv'][tranche_name]['npv'] }}</td>
            <td>{{ values['premium_payment'] }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endif %}




<!-- Analysis Tabs -->
<div id="analysis-section">
    <h3>Analysis</h3>
    <div class="tabs">
        <button class="tab-button" onclick="openTab(event, 'sensitivity-analysis')">Sensitivity Analysis</button>
        <button class="tab-button" onclick="openTab(event, 'scenario-analysis')">Scenario Analysis</button>
    </div>
    <div id="sensitivity-analysis" class="tab-content" style="display: block;"> <!-- Default display is block -->
        <h4>Sensitivity Analysis</h4>
        <form id="sensitivity-form" onsubmit="return false;" class="form-grid">
            <input type="hidden" name="analysis_type" value="sensitivity">
            <!-- Iterate over CDS Contracts -->
            <div class="contracts-container">
                {% for i in range(1, num_contracts + 1) %}
                    <div class="cds-contract" data-index="{{ i }}">
                        <input type="hidden" name="nominal_{{ i }}" value="{{ form_data['nominal_' ~ i] }}">
                        <input type="hidden" name="spread_{{ i }}" value="{{ form_data['spread_' ~ i] }}">
                        <input type="hidden" name="recovery_rate_{{ i }}" value="{{ form_data['recovery_rate_' ~ i] }}">
                        <input type="hidden" name="risk_free_{{ i }}" value="{{ form_data['risk_free_' ~ i] }}">
                        <input type="hidden" name="calendar_type_{{ i }}" value="{{ form_data['calendar_type_' ~ i] }}">
                        <input type="hidden" name="side_type_{{ i }}" value="{{ form_data['side_type_' ~ i] }}">
                        <input type="hidden" name="selected_tenor_{{ i }}" value="{{ form_data['selected_tenor_' ~ i] }}">
                        <input type="hidden" name="entry_date_{{ i }}" value="{{ form_data['entry_date_' ~ i] }}">
                        <input type="hidden" name="end_date_{{ i }}" value="{{ form_data['end_date_' ~ i] }}">
                    </div>
                {% endfor %}
            </div>
            <input type="hidden" name="tranche_upper_1" value="{{ form_data.tranche_upper_1 }}">
            <input type="hidden" name="tranche_upper_2" value="{{ form_data.tranche_upper_2 }}">
            <input type="hidden" name="tranche_upper_3" value="{{ form_data.tranche_upper_3 }}">
            <input type="hidden" name="tranche_lower_1" value="{{ form_data.tranche_lower_1 }}">
            <input type="hidden" name="tranche_lower_2" value="{{ form_data.tranche_lower_2 }}">
            <input type="hidden" name="tranche_lower_3" value="{{ form_data.tranche_lower_3 }}">
            
            <div class="form-group">
                <label for="num_steps">Number of Steps (i.e., 10):</label>
                <input type="number" id="num_steps" name="num_steps" value="{{ form_data.num_steps }}" required>
            </div>
            <div class="form-group">
                <label for="range_span">Step Range (i.e., 0.05):</label>
                <input type="number" step="0.01" id="range_span" name="range_span" value="{{ form_data.range_span }}" required>
            </div>
            <div class="form-group">
                <label for="variable">Input Variable:</label>
                <select id="variable" name="variable" required>
                    <option value="risk_free" {% if form_data.variable == 'risk_free' %}selected{% endif %}>Risk Free Rate</option>
                    <option value="recovery_rate" {% if form_data.variable == 'recovery_rate' %}selected{% endif %}>Recovery Rate</option>
                    <option value="spread" {% if form_data.variable == 'spread' %}selected{% endif %}>Spread</option>
                </select>
            </div>
            <div class="form-group full-width">
                <button type="button" onclick="submitForm('sensitivity-form', '/credit-derivatives/synthetic_collateralized_debt_obligation', 'sensitivity-results');">Run Sensitivity Analysis</button>
            </div>
        </form>
    <div id="sensitivity-results" class="sens-results">
        {% if cdo_analysis_results %}
        <div class="result">
            <h4>Sensitivity Analysis Results</h4>
            <img src="{{ url_for('static', filename=session['cdo_analysis_results']['plot_filename']) }}" alt="Plot">
        {% endif %}
        </div>
    </div>
    
    <!-- Scenario Analysis Tab Content -->
    <div id="scenario-analysis" class="tab-content">
        <h4>Scenario Analysis</h4>
        <form id="scenario-form" onsubmit="return false;" class="form-grid">
            <input type="hidden" name="analysis_type" value="scenario">
            <!-- Iterate over CDS Contracts -->
            <div class="contracts-container">
                {% for i in range(1, num_contracts + 1) %}
                    <div class="cds-contract" data-index="{{ i }}">
                        <input type="hidden" name="nominal_{{ i }}" value="{{ form_data['nominal_' ~ i] }}">
                        <input type="hidden" name="spread_{{ i }}" value="{{ form_data['spread_' ~ i] }}">
                        <input type="hidden" name="recovery_rate_{{ i }}" value="{{ form_data['recovery_rate_' ~ i] }}">
                        <input type="hidden" name="risk_free_{{ i }}" value="{{ form_data['risk_free_' ~ i] }}">
                        <input type="hidden" name="calendar_type_{{ i }}" value="{{ form_data['calendar_type_' ~ i] }}">
                        <input type="hidden" name="side_type_{{ i }}" value="{{ form_data['side_type_' ~ i] }}">
                        <input type="hidden" name="selected_tenor_{{ i }}" value="{{ form_data['selected_tenor_' ~ i] }}">
                        <input type="hidden" name="entry_date_{{ i }}" value="{{ form_data['entry_date_' ~ i] }}">
                        <input type="hidden" name="end_date_{{ i }}" value="{{ form_data['end_date_' ~ i] }}">
                    </div>
                {% endfor %}
            </div>
            
            <input type="hidden" name="tranche_upper_1" value="{{ form_data.tranche_upper_1 }}">
            <input type="hidden" name="tranche_upper_2" value="{{ form_data.tranche_upper_2 }}">
            <input type="hidden" name="tranche_upper_3" value="{{ form_data.tranche_upper_3 }}">
            <input type="hidden" name="tranche_lower_1" value="{{ form_data.tranche_lower_1 }}">
            <input type="hidden" name="tranche_lower_2" value="{{ form_data.tranche_lower_2 }}">
            <input type="hidden" name="tranche_lower_3" value="{{ form_data.tranche_lower_3 }}">

            
            <div class="form-group">
                <label for="rate_scenario">Interest Rate Scenario:</label>
                <select id="rate_scenario" name="rate_scenario" required>
                    <option value="-0.05">-5%</option>
                    <option value="-0.02">-2%</option>
                    <option value="-0.01">-1%</option>
                    <option value="0">0%</option>
                    <option value="0.01">1%</option>
                    <option value="0.02">2%</option>
                    <option value="0.05">5%</option>
                </select>
            </div>
            <div class="form-group">
                <label for="spread_scenario">Spread Scenario:</label>
                <select id="spread_scenario" name="spread_scenario" required>
                    <option value="-0.05">-5%</option>
                    <option value="-0.02">-2%</option>
                    <option value="-0.01">-1%</option>
                    <option value="0">0%</option>
                    <option value="0.01">1%</option>
                    <option value="0.02">2%</option>
                    <option value="0.05">5%</option>
                </select>
            </div>
            <div class="form-group">
                <label for="recovery_scenario">Recovery Rate Scenario:</label>
                <select id="recovery_scenario" name="recovery_scenario" required>
                    <option value="-0.25">-25%</option>
                    <option value="-0.2">-20%</option>
                    <option value="-0.1">-10%</option>
                    <option value="0">0%</option>
                    <option value="0.1">10%</option>
                    <option value="0.2">20%</option>
                    <option value="0.25">25%</option>
                </select>
            </div>
            
            <div class="form-group full-width">
                <button type="button" onclick="submitForm('scenario-form', '/credit-derivatives/synthetic_collateralized_debt_obligation', 'scenario-results');">Run Scenario Analysis</button>
            </div>
        </form>
        <div id="scenario-results" class="sens-results">
            <!-- Displaying Tranche Cashflows -->
            {% if baseline_CDO is not none or stressed_CDO is not none %}
            <h4>Scenario Analysis Results</h4>
            <table class="results-table" border="1">
                <thead>
                    <tr>
                        <th>Scenario</th>
                        <th>Tranche Name</th>
                        <th>Expected Loss</th>
                        <th>Default Probability</th>
                        <th>Net Present Value</th>
                        <th>Premium Payment</th>
                    </tr>
                </thead>
                <tbody>
                    {% for scenario, CDO_data in {'Baseline': baseline_CDO, 'Stressed': stressed_CDO}.items() %}
                        {% if CDO_data %}
                            {% for tranche_name, values in CDO_data['tranche_cashflows'].items() %}
                            <tr>
                                <td>{{ scenario }}</td>
                                <td>{{ tranche_name }}</td>
                                <td>{{ values['expected_loss'] if values['expected_loss'] is not none else '' }}</td>
                                <td>{{ values['default_probability'] if values['default_probability'] is not none else '' }}</td>
                                <td>{{ CDO_data['tranche_npv'][tranche_name]['npv'] if CDO_data['tranche_npv'] and tranche_name in CDO_data['tranche_npv'] else '' }}</td>
                                <td>{{ values['premium_payment'] if values['premium_payment'] is not none else '' }}</td>
                            </tr>
                            {% endfor %}
                        {% endif %}
                    {% endfor %}
                </tbody>
            </table>
            {% endif %}
        </div>
    </div>
</div>

<style>
    .fixed-dropdown {
    position: relative; /* Change to fixed or absolute if needed */
    top: 20px; /* Adjust as necessary */
    width: 100%; /* Optional: Ensure it spans the full width of the form */
}
    .contracts-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 10px;
}
</style>



<!-- JavaScript for Adding and Removing CDS Contracts -->
<script>
let formData = {{ form_data|tojson }};  // Capture form data in JavaScript as an object
let contractIndex = {{ num_contracts }};  // To track the current contract index

function updateFormData() {
    // Update formData with the current contract data
    formData = {};
    document.querySelectorAll('.cds-contract').forEach((contract, index) => {
        const idx = index + 1;  // Start from 1
        formData[`nominal_${idx}`] = contract.querySelector(`#nominal_${idx}`).value;
        formData[`spread_${idx}`] = contract.querySelector(`#spread_${idx}`).value;
        formData[`recovery_rate_${idx}`] = contract.querySelector(`#recovery_rate_${idx}`).value;
        formData[`risk_free_${idx}`] = contract.querySelector(`#risk_free_${idx}`).value;
        formData[`calendar_type_${idx}`] = contract.querySelector(`#calendar_type_${idx}`).value;
        formData[`side_type_${idx}`] = contract.querySelector(`#side_type_${idx}`).value;
        formData[`selected_tenor_${idx}`] = contract.querySelector(`#selected_tenor_${idx}`).value;
        formData[`entry_date_${idx}`] = contract.querySelector(`#entry_date_${idx}`).value;
        formData[`end_date_${idx}`] = contract.querySelector(`#end_date_${idx}`).value;
    });
}

function reindexFormData() {
    const contracts = document.querySelectorAll('.cds-contract');
    
    contracts.forEach((contract, index) => {
        const contractIndex = index + 1; // Starting from 1
        contract.querySelectorAll('input, select').forEach((input) => {
            const name = input.name;
            // Update the name attribute to reflect the new index
            input.name = name.replace(/\d+/, contractIndex);
            // Update the id as well for each field
            input.id = input.id.replace(/\d+/, contractIndex);
        });
        
        // Update the display text for CDS contract headers as well
        contract.querySelector('h4').textContent = `CDS Contract ${contractIndex}`;
    });
}

document.getElementById('add-cds').addEventListener('click', function() {
    contractIndex++;
    var newContract = document.createElement('div');
    newContract.classList.add('cds-contract');
    newContract.innerHTML = `
        <h4>CDS Contract ${contractIndex}</h4>
        <div class="form-group">
            <label for="nominal_${contractIndex}">Nominal ($):</label>
            <input type="number" step="0.01" id="nominal_${contractIndex}" name="nominal_${contractIndex}" required>
        </div>
        <div class="form-group">
            <label for="spread_${contractIndex}">Spread (i.e., 0.05):</label>
            <input type="number" step="0.0001" id="spread_${contractIndex}" name="spread_${contractIndex}" required>
        </div>
        <div class="form-group">
            <label for="recovery_rate_${contractIndex}">Recovery Rate (i.e., 0.4):</label>
            <input type="number" step="0.0001" id="recovery_rate_${contractIndex}" name="recovery_rate_${contractIndex}" required>
        </div>
        <div class="form-group">
            <label for="risk_free_${contractIndex}">Risk-Free Rate (i.e., 0.02):</label>
            <input type="number" step="0.0001" id="risk_free_${contractIndex}" name="risk_free_${contractIndex}" required>
        </div>
        <div class="form-group">
            <label for="calendar_type_${contractIndex}">Calendar Type:</label>
            <select id="calendar_type_${contractIndex}" name="calendar_type_${contractIndex}" required>
                <option value="American">American</option>
                <option value="TARGET">TARGET</option>
                <option value="UnitedKingdom">United Kingdom</option>
                <option value="China">China</option>
            </select>
        </div>
        <div class="form-group">
            <label for="side_type_${contractIndex}">Side Type:</label>
            <select id="side_type_${contractIndex}" name="side_type_${contractIndex}" required>
                <option value="Seller">Seller</option>
                <option value="Buyer">Buyer</option>
            </select>
        </div>
        <div class="form-group">
            <label for="selected_tenor_${contractIndex}">Selected Tenor:</label>
            <select id="selected_tenor_${contractIndex}" name="selected_tenor_${contractIndex}" required>
                <option value="Annual">Annual</option>
                <option value="Semiannual">Semiannual</option>
                <option value="Quarterly">Quarterly</option>
                <option value="Monthly">Monthly</option>
            </select>
        </div>
        <div class="form-group">
            <label for="entry_date_${contractIndex}">Entry Date:</label>
            <input type="date" id="entry_date_${contractIndex}" name="entry_date_${contractIndex}" required>
        </div>
        <div class="form-group">
            <label for="end_date_${contractIndex}">End Date:</label>
            <input type="date" id="end_date_${contractIndex}" name="end_date_${contractIndex}" required>
        </div>
        <button type="button" class="remove-cds btn btn-danger" style="margin-top: 10px;">Remove this CDS Contract</button>
    `;
    document.getElementById('cds-contracts').appendChild(newContract);

    // Add remove button functionality for newly added contract
    newContract.querySelector('.remove-cds').addEventListener('click', function() {
        newContract.remove();
        contractIndex--;
        updateFormData();  // Update form data after removing a contract
        reindexFormData();
    });

    updateFormData();  // Update form data when a new contract is added
});

// Attach event listener to all existing remove buttons (for removing any CDS contract)
document.querySelectorAll('.remove-cds').forEach(function(button) {
    button.addEventListener('click', function() {
        var contract = button.closest('.cds-contract');
        contract.remove();
        contractIndex--;
        reindexFormData();  // Reindex after removing a contract
        updateFormData();   // Update form data
    });
});

document.getElementById('options-form').addEventListener('submit', function(event) {
    var loadingSpinner = document.getElementById('loadingSpinner');
    loadingSpinner.style.display = 'block';  // Show spinner on form submit

    window.addEventListener('load', function() {
        loadingSpinner.style.display = 'none';  // Hide spinner on page load
    });
});

</script>

<!-- JavaScript for Form Submission and Loading Spinner -->
<script>
document.getElementById('options-form').addEventListener('submit', function(event) {
    var loadingSpinner = document.getElementById('loadingSpinner');
    loadingSpinner.style.display = 'block';  // Show spinner on form submit

    window.addEventListener('load', function() {
        loadingSpinner.style.display = 'none';  // Hide spinner on page load
    });
});

// JavaScript for AJAX Form Submission
function submitForm(formId, url, updateId) {
    var form = document.getElementById(formId);
    var formData = new FormData(form);
    var xhr = new XMLHttpRequest();

    xhr.open("POST", url, true);

    xhr.onreadystatechange = function() {
        if (xhr.readyState === 4 && xhr.status === 200) {
            console.log("Form submitted successfully");
            var parser = new DOMParser();
            var doc = parser.parseFromString(xhr.responseText, 'text/html');

            // Update the relevant section
            var updateSection = doc.getElementById(updateId);
            if (updateSection) {
                document.getElementById(updateId).innerHTML = updateSection.innerHTML;
                // Show the results section after successfully updating it
                document.getElementById(updateId).style.display = 'block';
            } else {
                console.log("Update section not found");
            }
        } else if (xhr.readyState === 4) {
            console.log("Error in form submission: " + xhr.status);
        }
    };

    xhr.onerror = function() {
        console.log("Request failed");
    };

    xhr.send(formData);
}

// JavaScript for Tabs
function openTab(evt, tabName) {
    var i, tabcontent, tablinks;

    // Hide all tab contents
    tabcontent = document.getElementsByClassName("tab-content");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }

    // Remove the active class from all tab buttons
    tablinks = document.getElementsByClassName("tab-button");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }

    // Show the current tab content and add an active class to the button that opened the tab
    document.getElementById(tabName).style.display = "block";
    evt.currentTarget.className += " active";
}

// By default, open the first tab
document.addEventListener("DOMContentLoaded", function() {
    document.querySelector(".tab-button").click();
});
</script>
{% endblock %}
