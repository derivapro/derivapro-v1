<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Model Validation Report</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1, h2, h3 { color: #333; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        table, th, td { border: 1px solid black; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .btn-primary {
            display: inline-block;
            padding: 10px 20px;
            color: white;
            background-color: #007bff;
            text-decoration: none;
            border-radius: 5px;
        }
        .btn-primary:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <h1>{{ model_name }} Validation Report</h1>
    <h2>{{ validation_type }} - Date: {{ validation_date }}</h2>

    <h3>1. Executive Summary</h3>
    <p>{{ validation_overview }}</p>

    <h3>2. Model Purpose and Use</h3>
    <p>{{ model_purpose }}</p>

    <h3>3. Model Overview</h3>
    <p>{{ model_overview }}</p>

    <h3>4. Key Limitations/Weaknesses and Associated Model Risks</h3>
    <p>{{ key_limitations }}</p>

    <h3>5. Validation Scope and Approach</h3>
    <p>{{ validation_scope }}</p>

    <h3>6. Data Quality</h3>
    <p>{{ data_quality }}</p>

    <h3>7. Conceptual Soundness</h3>
    <p>{{ conceptual_soundness }}</p>

    <h3>8. Model Performance</h3>

    <!-- Sensitivity Analysis -->
    <h4>8.1 Sensitivity Analysis</h4>
    <p>{{ sensitivity_description }}</p>

    <!-- Display the Sensitivity Plot -->
    {% if sensitivity_plot %}
        <h5>Sensitivity Plot</h5>
        <img src="{{ url_for('static', filename=sensitivity_plot) }}" alt="Sensitivity Analysis Plot" style="max-width: 100%; height: auto;">
    {% else %}
        <p>No sensitivity plot available.</p>
    {% endif %}

    <!-- AI Assessment -->
    <h5>MRM Assessment:</h5>
    <p>{{ sensitivity_assessment }}</p>

    <!-- Scenario Analysis -->
    <h4>8.2 Scenario Analysis</h4>
    <p>{{ scenario_description }}</p>
    <h5>Scenario Results</h5>
    <table>
        <thead>
            <tr>
                <th>Scenario</th>
                <th>Option Price</th>
                <th>Delta</th>
                <th>Gamma</th>
                <th>Vega</th>
                <th>Theta</th>
                <th>Rho</th>
            </tr>
        </thead>
        <tbody>
            {% for result in scenario_results %}
            <tr>
                <td>{{ result.scenario }}</td>
                <td>{{ result.option_price }}</td>
                <td>{{ result.delta }}</td>
                <td>{{ result.gamma }}</td>
                <td>{{ result.vega }}</td>
                <td>{{ result.theta }}</td>
                <td>{{ result.rho }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <h5>MRM Assessment:</h5>
    <p>{{ scenario_assessment }}</p>

    <!-- Provide a download link for the report -->
    <h3>Download the Report</h3>
    <a href="{{ url_for('vanilla_options.download_report') }}" class="btn btn-primary">Download PDF Report</a>
</body>
</html>
